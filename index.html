<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Text Crossfade Demo</title>
  <style>
    input {
      vertical-align: top;
      width: 20em;
    }
  </style>
</head>
<body>
  <input type="text" id="thing1" placeholder="Put text in me." value="elvis was here 300 seconds ago">
  <input type="range" id="fader" min="0" max="1" step="0.05">
  <input type="text" id="thing2" placeholder="Put text in me." value="george washington slept 10 years">
  <br>
  <br>
  <input type="text" id="output" readonly>
  <p id="start">This is some text.</p>

  <script src="bower_components/levenshtein/lib/levenshtein.js"></script>
  <script src="text-mix.js"></script>
  <script src="bower_components/jquery/jquery.min.js"></script>
  <script src="text-mix.jquery.js"></script>
  <script>
    var thing1 = document.getElementById('thing1'),
        thing2 = document.getElementById('thing2'),
        fader = document.getElementById('fader'),
        output = document.getElementById('output'),
        step = +fader.step,
        timer, lastVal,
        ramp = function () {
          var val = +fader.value;
          val += step;
          if ((val > +fader.max) || (val < +fader.min)) {
            step = -step;
            val += step;
          }
          fader.value = val;
          output.value = textMix.textMix(thing1.value, thing2.value, val);
          timer = setTimeout(ramp, Math.abs(2 / step));
        },
        cb = function (e) {
          if (timer) {
            clearTimeout(timer);
          }
          if (fader.value != lastVal) {
            output.value = textMix.textMix(thing1.value, thing2.value, this.value);
            lastVal = fader.value;
          }
        };
    fader.addEventListener('input', cb, false);
    fader.addEventListener('change', cb, false);
    ramp();
  </script>
</body>
</html>
